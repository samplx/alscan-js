#!/bin/sh
# vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4 fileencoding=utf-8 :
#
#      Copyright 2013 James Burlingame
# 
#      Licensed under the Apache License, Version 2.0 (the "License");
#      you may not use this file except in compliance with the License.
#      You may obtain a copy of the License at
# 
#          http://www.apache.org/licenses/LICENSE-2.0
# 
#      Unless required by applicable law or agreed to in writing, software
#      distributed under the License is distributed on an "AS IS" BASIS,
#      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#      See the License for the specific language governing permissions and
#      limitations under the License.
#
#

basedir=`dirname "$0"`
SITE_CONFIG=""

if [ -r "$basedir/node_modules/alscan/bin/alscan-cli.js" ]
then
    if [ -r "$basedir/node_modules/alscan/etc/config" ]
    then
        SITE_CONFIG="--site-config=$basedir/node_modules/alscan/etc/config"
    fi
    node "$basedir/node_modules/alscan/bin/alscan-cli.js" $SITE_CONFIG "$@"
elif [ -r "$basedir/alscan-cli.js" ]
then
    if [ -r "$basedir/../etc/config" ]
    then
        SITE_CONFIG="--site-config=$basedir/../etc/config"
    fi
    node "$basedir/alscan-cli.js" $SITE_CONFIG "$@"
else
    echo "$0: ERROR: Cannot find alscan-cli.js script." 2>&1
    exit 1
fi
